"use strict";

var _$template = require("solid-js/web").template;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MaybeOutline = MaybeOutline;

var _web = require("solid-js/web");

var _solidJs = require("solid-js");

var _getElementInfo = require("../adapters/getElementInfo");

var _Outline = require("./Outline");

const _tmpl$ = /*#__PURE__*/_$template(`<div class="fixed top-0 left-0 w-screen h-screen flex items-center justify-center"><div class="flex items-center justify-center">No source found</div></div>`, 4);

function MaybeOutline(props) {
  const elInfo = (0, _solidJs.createMemo)(() => (0, _getElementInfo.getElementInfo)(props.currentElement, props.adapterId));

  const box = () => props.currentElement.getBoundingClientRect();

  return (0, _web.memo)((() => {
    const _c$ = (0, _web.memo)(() => !!elInfo(), true);

    return () => _c$() ? (0, _web.createComponent)(_Outline.Outline, {
      get element() {
        return elInfo();
      },

      get showTreeFromElement() {
        return props.showTreeFromElement;
      },

      get targets() {
        return props.targets;
      }

    }) : (() => {
      const _el$ = _tmpl$.cloneNode(true),
            _el$2 = _el$.firstChild;

      _el$2.style.setProperty("position", "absolute");

      _el$2.style.setProperty("background-color", "rgba(222, 0, 0, 0.3)");

      _el$2.style.setProperty("border", "1px solid rgba(222, 0, 0, 0.5)");

      _el$2.style.setProperty("border-radius", "2px");

      _el$2.style.setProperty("font-size", "12px");

      _el$2.style.setProperty("font-weight", "bold");

      _el$2.style.setProperty("text-shadow", "-1px 1px 0 #fff, 1px 1px 0 #fff, 1px -1px 0 #fff, -1px -1px 0 #fff");

      _el$2.style.setProperty("text-overflow", "ellipsis");

      (0, _web.effect)(_p$ => {
        const _v$ = box().x + "px",
              _v$2 = box().y + "px",
              _v$3 = box().width + "px",
              _v$4 = box().height + "px";

        _v$ !== _p$._v$ && _el$2.style.setProperty("left", _p$._v$ = _v$);
        _v$2 !== _p$._v$2 && _el$2.style.setProperty("top", _p$._v$2 = _v$2);
        _v$3 !== _p$._v$3 && _el$2.style.setProperty("width", _p$._v$3 = _v$3);
        _v$4 !== _p$._v$4 && _el$2.style.setProperty("height", _p$._v$4 = _v$4);
        return _p$;
      }, {
        _v$: undefined,
        _v$2: undefined,
        _v$3: undefined,
        _v$4: undefined
      });
      return _el$;
    })();
  })());
}