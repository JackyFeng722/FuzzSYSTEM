"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getVNodeBoundingBox = getVNodeBoundingBox;
exports.getVueComponentBoundingBox = getVueComponentBoundingBox;

var _mergeRects = require("../../functions/mergeRects");

function getVueComponentBoundingBox(vcomponent) {
  let composedRect = null;

  if (vcomponent?.subTree?.children && vcomponent?.subTree?.children instanceof Array) {
    vcomponent?.subTree?.children.forEach(child => {
      const box = getVNodeBoundingBox(child);

      if (!box) {
        return;
      }

      if (box.width <= 0 || box.height <= 0) {
        // ignore zero-sized rects
        return;
      }

      if (composedRect) {
        composedRect = (0, _mergeRects.mergeRects)(composedRect, box);
      } else {
        composedRect = box;
      }
    });
  }

  return composedRect;
}

function getVNodeBoundingBox(vnode) {
  if (vnode.el instanceof HTMLElement) {
    return vnode.el.getBoundingClientRect();
  }

  if (vnode.component) {
    return getVueComponentBoundingBox(vnode.component);
  }

  return null;
}